<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Booking System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .seat {
            width: 30px;
            height: 30px;
            margin: 2px;
            cursor: pointer;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .seat.business {
            background-color: #dc2626;
            color: white;
        }
        .seat.economy {
            background-color: #3b82f6;
            color: white;
        }
        .seat.selected {
            background-color: #10b981;
            transform: scale(1.1);
        }
        .seat.occupied {
            background-color: #6b7280;
            cursor: not-allowed;
        }
        .airplane-body {
            background: linear-gradient(to bottom, #f3f4f6, #e5e7eb);
            border-radius: 50px;
            border: 3px solid #374151;
            position: relative;
        }
        .cockpit {
            background: #1f2937;
            border-radius: 50px 50px 0 0;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }
        .facility {
            background-color: #9ca3af;
            color: white;
            font-size: 8px;
            text-align: center;
            padding: 2px;
            border-radius: 4px;
            margin: 1px;
        }
        .ticket-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        .ticket-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.3;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Form 1: Booking Details -->
        <div id="form1" class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-3xl font-bold text-gray-800">Flight Booking</h2>
                <div class="flex space-x-2">
                    <div class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</div>
                    <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold">2</div>
                    <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold">3</div>
                </div>
            </div>

            <form id="bookingForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                        <input type="text" id="firstName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                        <input type="text" id="lastName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="email" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                        <input type="tel" id="phone" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                        <select id="country" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Select Country</option>
                            <option value="USA">USA</option>
                            <option value="Canada">Canada</option>
                            <option value="UK">UK</option>
                            <option value="Australia">Australia</option>
                            <option value="New Zealand">New Zealand</option>
                            <option value="France">France</option>
                            <option value="India">India</option>
                            <option value="China">China</option>
                            <option value="Sri Lanka">Sri Lanka</option>
                            <option value="South Africa">South Africa</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">City</label>
                    <input type="text" id="city" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Travel Destinations</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">From Country</label>
                            <select id="fromCountry" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select Country</option>
                                <option value="USA">USA</option>
                                <option value="Canada">Canada</option>
                                <option value="UK">UK</option>
                                <option value="Australia">Australia</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="France">France</option>
                                <option value="India">India</option>
                                <option value="China">China</option>
                                <option value="Sri Lanka">Sri Lanka</option>
                                <option value="South Africa">South Africa</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">From City</label>
                            <select id="fromCity" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select City</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">To Country</label>
                            <select id="toCountry" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select Country</option>
                                <option value="USA">USA</option>
                                <option value="Canada">Canada</option>
                                <option value="UK">UK</option>
                                <option value="Australia">Australia</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="France">France</option>
                                <option value="India">India</option>
                                <option value="China">China</option>
                                <option value="Sri Lanka">Sri Lanka</option>
                                <option value="South Africa">South Africa</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">To City</label>
                            <select id="toCity" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select City</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end">
                    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        Next Step
                    </button>
                </div>
            </form>
        </div>

        <!-- Form 2: Seat Selection -->
        <div id="form2" class="max-w-6xl mx-auto bg-white rounded-lg shadow-lg p-8 hidden">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-3xl font-bold text-gray-800">Select Your Seats</h2>
                <div class="flex space-x-2">
                    <div class="w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">✓</div>
                    <div class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</div>
                    <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold">3</div>
                </div>
            </div>

            <div class="mb-6">
                <div class="flex items-center space-x-6 text-sm">
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-red-600 rounded"></div>
                        <span>Business Class ($1000)</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-blue-600 rounded"></div>
                        <span>Economy Class ($450)</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-green-600 rounded"></div>
                        <span>Selected</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-gray-600 rounded"></div>
                        <span>Occupied</span>
                    </div>
                </div>
            </div>

            <div class="airplane-body max-w-md mx-auto p-4">
                <!-- Cockpit -->
                <div class="cockpit mb-4">
                    <span>COCKPIT</span>
                </div>

                <!-- Business Class Section -->
                <div class="mb-6">
                    <h4 class="text-center text-sm font-bold mb-2 text-red-600">BUSINESS CLASS</h4>
                    <div id="businessSeats" class="space-y-2">
                        <!-- Business seats will be generated here -->
                    </div>
                </div>

                <!-- Facilities -->
                <div class="flex justify-between mb-4">
                    <div class="facility w-16">Male WC</div>
                    <div class="facility w-20">Cabin Crew</div>
                    <div class="facility w-16">Female WC</div>
                </div>

                <!-- Emergency Exit -->
                <div class="bg-yellow-400 text-black text-center py-2 mb-4 rounded font-bold text-xs">
                    EMERGENCY EXIT
                </div>

                <!-- Economy Class Section -->
                <div class="mb-6">
                    <h4 class="text-center text-sm font-bold mb-2 text-blue-600">ECONOMY CLASS</h4>
                    <div id="economySeats" class="space-y-2">
                        <!-- Economy seats will be generated here -->
                    </div>
                </div>

                <!-- Rear Facilities -->
                <div class="flex justify-center mb-4">
                    <div class="facility w-24">Food Service</div>
                </div>

                <!-- Rear Emergency Exit -->
                <div class="bg-yellow-400 text-black text-center py-2 mb-4 rounded font-bold text-xs">
                    EMERGENCY EXIT
                </div>
            </div>

            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <div class="flex justify-between items-center">
                    <div>
                        <h3 class="text-lg font-semibold">Selected Seats: <span id="selectedSeatsCount">0</span></h3>
                        <p id="selectedSeatsList" class="text-sm text-gray-600">None selected</p>
                    </div>
                    <div class="text-right">
                        <h3 class="text-2xl font-bold text-green-600">Total: $<span id="totalPrice">0</span></h3>
                    </div>
                </div>
            </div>

            <div class="flex justify-between mt-6">
                <button id="backToForm1" class="px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700">
                    Back
                </button>
                <button id="proceedToPayment" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                    Proceed to Payment
                </button>
            </div>
        </div>

        <!-- Form 3: Payment -->
        <div id="form3" class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 hidden">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-3xl font-bold text-gray-800">Payment Details</h2>
                <div class="flex space-x-2">
                    <div class="w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">✓</div>
                    <div class="w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold">✓</div>
                    <div class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">3</div>
                </div>
            </div>

            <form id="paymentForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Cardholder Name</label>
                    <input type="text" id="cardholderName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Card Number</label>
                    <input type="text" id="cardNumber" required placeholder="1234 5678 9012 3456" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div class="grid grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">CVC</label>
                        <input type="text" id="cvc" required placeholder="123" maxlength="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Expiry Date</label>
                        <input type="text" id="expiryDate" required placeholder="MM/YY" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="flex justify-between items-center">
                        <span class="text-lg font-semibold">Total Cost:</span>
                        <span class="text-2xl font-bold text-green-600">$<span id="finalTotalPrice">0</span></span>
                    </div>
                </div>

                <div class="flex justify-between">
                    <button type="button" id="backToForm2" class="px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700">
                        Back
                    </button>
                    <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">
                        Submit Payment
                    </button>
                </div>
            </form>
        </div>

        <!-- Processing Message -->
        <div id="processingMessage" class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 hidden text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"></div>
            <h2 class="text-2xl font-bold text-gray-800">Processing Payment...</h2>
            <p class="text-gray-600 mt-2">Please wait while we process your payment</p>
        </div>

        <!-- Success Message -->
        <div id="successMessage" class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 hidden text-center">
            <div class="text-green-600 text-6xl mb-4">✓</div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Payment Successful!</h2>
            <p class="text-gray-600 mb-6">Your booking has been confirmed</p>
            <button id="downloadTicket" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                Download Ticket
            </button>
        </div>

        <!-- Ticket -->
        <div id="ticketContainer" class="max-w-2xl mx-auto hidden">
            <div class="ticket-container p-8 relative">
                <div class="relative z-10">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">✈️ BOARDING PASS</h2>
                        <div class="text-right">
                            <p class="text-sm opacity-75">Flight</p>
                            <p class="text-lg font-bold">FL-2025</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div>
                            <p class="text-sm opacity-75">Passenger</p>
                            <p class="text-xl font-bold" id="ticketPassengerName"></p>
                        </div>
                        <div>
                            <p class="text-sm opacity-75">Date</p>
                            <p class="text-lg font-bold" id="ticketDate"></p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div>
                            <p class="text-sm opacity-75">From</p>
                            <p class="text-lg font-bold" id="ticketFrom"></p>
                        </div>
                        <div>
                            <p class="text-sm opacity-75">To</p>
                            <p class="text-lg font-bold" id="ticketTo"></p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div>
                            <p class="text-sm opacity-75">Seat(s)</p>
                            <p class="text-lg font-bold" id="ticketSeats"></p>
                        </div>
                        <div>
                            <p class="text-sm opacity-75">Total Price</p>
                            <p class="text-2xl font-bold" id="ticketPrice"></p>
                        </div>
                    </div>
                    
                    <div class="border-t border-white border-opacity-30 pt-4">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-sm opacity-75">Boarding Time</p>
                                <p class="font-bold">45 mins before departure</p>
                            </div>
                            <div class="text-right">
                                <p class="text-sm opacity-75">Gate</p>
                                <p class="text-xl font-bold">A12</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // City mapping
        const cityMapping = {
            'USA': ['New York', 'Washington', 'Chicago', 'Los Angeles', 'San Francisco'],
            'Canada': ['Ontario', 'Toronto'],
            'UK': ['London', 'Manchester'],
            'Australia': ['Sydney', 'Melbourne', 'Adelaide', 'Perth', 'Gold Coast'],
            'New Zealand': ['Auckland', 'Wellington'],
            'France': ['Paris'],
            'India': ['Mumbai', 'New Delhi', 'Bangalore', 'Chennai'],
            'China': ['Beijing', 'Shanghai'],
            'Sri Lanka': ['Colombo'],
            'South Africa': ['Cape Town']
        };

        // Booking data
        let bookingData = {};
        let selectedSeats = [];
        let totalPrice = 0;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            generateSeats();
        });

        function setupEventListeners() {
            // Country change handlers
            document.getElementById('fromCountry').addEventListener('change', function() {
                updateCities('fromCity', this.value);
            });

            document.getElementById('toCountry').addEventListener('change', function() {
                updateCities('toCity', this.value);
            });

            // Form submissions
            document.getElementById('bookingForm').addEventListener('submit', handleBookingSubmit);
            document.getElementById('paymentForm').addEventListener('submit', handlePaymentSubmit);

            // Navigation buttons
            document.getElementById('backToForm1').addEventListener('click', () => showForm('form1'));
            document.getElementById('backToForm2').addEventListener('click', () => showForm('form2'));
            document.getElementById('proceedToPayment').addEventListener('click', () => {
                if (selectedSeats.length === 0) {
                    alert('Please select at least one seat.');
                    return;
                }
                showForm('form3');
                document.getElementById('finalTotalPrice').textContent = totalPrice;
            });

            document.getElementById('downloadTicket').addEventListener('click', downloadTicket);
        }

        function updateCities(selectId, country) {
            const citySelect = document.getElementById(selectId);
            citySelect.innerHTML = '<option value="">Select City</option>';
            
            if (country && cityMapping[country]) {
                cityMapping[country].forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    citySelect.appendChild(option);
                });
            }
        }

        function generateSeats() {
            generateBusinessSeats();
            generateEconomySeats();
        }

        function generateBusinessSeats() {
            const container = document.getElementById('businessSeats');
            container.innerHTML = '';
            
            // 10 rows of business class (4 seats per row) = 40 seats
            for (let row = 1; row <= 10; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'flex justify-center space-x-1';
                
                // Left side (A, B)
                ['A', 'B'].forEach(letter => {
                    const seat = createSeat(row + letter, 'business', 1000);
                    rowDiv.appendChild(seat);
                });
                
                // Aisle space
                const aisle = document.createElement('div');
                aisle.className = 'w-4';
                rowDiv.appendChild(aisle);
                
                // Right side (C, D)
                ['C', 'D'].forEach(letter => {
                    const seat = createSeat(row + letter, 'business', 1000);
                    rowDiv.appendChild(seat);
                });
                
                container.appendChild(rowDiv);
            }
        }

        function generateEconomySeats() {
            const container = document.getElementById('economySeats');
            container.innerHTML = '';
            
            // 10 rows of economy class (6 seats per row) = 60 seats
            for (let row = 11; row <= 20; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'flex justify-center space-x-1';
                
                // Left side (A, B, C)
                ['A', 'B', 'C'].forEach(letter => {
                    const seat = createSeat(row + letter, 'economy', 450);
                    rowDiv.appendChild(seat);
                });
                
                // Aisle space
                const aisle = document.createElement('div');
                aisle.className = 'w-4';
                rowDiv.appendChild(aisle);
                
                // Right side (D, E, F)
                ['D', 'E', 'F'].forEach(letter => {
                    const seat = createSeat(row + letter, 'economy', 450);
                    rowDiv.appendChild(seat);
                });
                
                container.appendChild(rowDiv);
            }
        }

        function createSeat(seatNumber, seatClass, price) {
            const seat = document.createElement('div');
            seat.className = `seat ${seatClass}`;
            seat.textContent = seatNumber;
            seat.dataset.seat = seatNumber;
            seat.dataset.price = price;
            seat.dataset.class = seatClass;
            
            // Randomly make some seats occupied
            if (Math.random() < 0.3) {
                seat.classList.add('occupied');
            } else {
                seat.addEventListener('click', toggleSeat);
            }
            
            return seat;
        }

        function toggleSeat(event) {
            const seat = event.target;
            const seatNumber = seat.dataset.seat;
            const price = parseInt(seat.dataset.price);
            
            if (seat.classList.contains('selected')) {
                // Deselect seat
                seat.classList.remove('selected');
                selectedSeats = selectedSeats.filter(s => s.number !== seatNumber);
                totalPrice -= price;
            } else {
                // Select seat
                seat.classList.add('selected');
                selectedSeats.push({
                    number: seatNumber,
                    class: seat.dataset.class,
                    price: price
                });
                totalPrice += price;
            }
            
            updateSeatInfo();
        }

        function updateSeatInfo() {
            document.getElementById('selectedSeatsCount').textContent = selectedSeats.length;
            document.getElementById('totalPrice').textContent = totalPrice;
            
            if (selectedSeats.length > 0) {
                const seatNumbers = selectedSeats.map(s => s.number).join(', ');
                document.getElementById('selectedSeatsList').textContent = seatNumbers;
            } else {
                document.getElementById('selectedSeatsList').textContent = 'None selected';
            }
        }

        function handleBookingSubmit(event) {
            event.preventDefault();
            
            // Collect form data
            bookingData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                country: document.getElementById('country').value,
                city: document.getElementById('city').value,
                fromCountry: document.getElementById('fromCountry').value,
                fromCity: document.getElementById('fromCity').value,
                toCountry: document.getElementById('toCountry').value,
                toCity: document.getElementById('toCity').value
            };
            
            showForm('form2');
        }

        function handlePaymentSubmit(event) {
            event.preventDefault();
            
            // Show processing message
            showForm('processingMessage');
            
            // Simulate payment processing
            setTimeout(() => {
                showForm('successMessage');
            }, 5000);
        }

        function showForm(formId) {
            // Hide all forms
            const forms = ['form1', 'form2', 'form3', 'processingMessage', 'successMessage', 'ticketContainer'];
            forms.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            
            // Show selected form
            document.getElementById(formId).classList.remove('hidden');
        }

        function downloadTicket() {
            // Populate ticket data
            const fullName = `${bookingData.firstName} ${bookingData.lastName}`;
            const fromLocation = `${bookingData.fromCity}, ${bookingData.fromCountry}`;
            const toLocation = `${bookingData.toCity}, ${bookingData.toCountry}`;
            const seatNumbers = selectedSeats.map(s => s.number).join(', ');
            const currentDate = new Date().toLocaleDateString();
            
            document.getElementById('ticketPassengerName').textContent = fullName;
            document.getElementById('ticketDate').textContent = currentDate;
            document.getElementById('ticketFrom').textContent = fromLocation;
            document.getElementById('ticketTo').textContent = toLocation;
            document.getElementById('ticketSeats').textContent = seatNumbers;
            document.getElementById('ticketPrice').textContent = `${totalPrice}`;
            
            // Show ticket
            showForm('ticketContainer');
            
            // Trigger download (simulate)
            setTimeout(() => {
                // Create a simple text content for download
                const ticketContent = `
BOARDING PASS - Flight FL-2025
==============================
Passenger: ${fullName}
Date: ${currentDate}
From: ${fromLocation}
To: ${toLocation}
Seat(s): ${seatNumbers}
Total Price: ${totalPrice}
Gate: A12
Boarding: 45 mins before departure
==============================
                `;
                
                const blob = new Blob([ticketContent], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `boarding-pass-${fullName.replace(' ', '-')}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            }, 1000);
        }

        // Card number formatting
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            if (formattedValue.length > 19) formattedValue = formattedValue.substr(0, 19);
            e.target.value = formattedValue;
        });

        // Expiry date formatting
        document.getElementById('expiryDate').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value;
        });

        // CVC validation
        document.getElementById('cvc').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/[^0-9]/g, '');
        });
    </script>
</body>
</html>